<!DOCTYPE html>
<html lang="zh-CN">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>生物学知识库 - 初高中生物学学习平台</title>
    <script src="https://cdn.tailwindcss.com"></script>
    <link href="https://cdn.jsdelivr.net/npm/font-awesome@4.7.0/css/font-awesome.min.css" rel="stylesheet">
    <script src="https://cdn.jsdelivr.net/npm/chart.js@4.4.8/dist/chart.umd.min.js"></script>
    <link rel="preconnect" href="https://fonts.googleapis.com">
    <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
    <link href="https://fonts.googleapis.com/css2?family=Inter:wght@300;400;500;600;700&display=swap" rel="stylesheet">
    
    <script>
        tailwind.config = {
            theme: {
                extend: {
                    colors: {
                        primary: '#2563eb',
                        secondary: '#10b981',
                        accent: '#f59e0b',
                        dark: '#1e293b',
                        light: '#f8fafc'
                    },
                    fontFamily: {
                        inter: ['Inter', 'sans-serif'],
                    },
                }
            }
        }
    </script>
    
    <style type="text/tailwindcss">
        @layer utilities {
            .content-auto {
                content-visibility: auto;
            }
            .text-shadow {
                text-shadow: 0 2px 4px rgba(0,0,0,0.1);
            }
            .card-hover {
                @apply transition-all duration-300 hover:shadow-lg hover:-translate-y-1;
            }
            .nav-link {
                @apply relative px-3 py-2 text-gray-700 hover:text-primary transition-colors duration-200;
            }
            .nav-link::after {
                @apply content-[''] absolute w-0 h-0.5 bg-primary left-0 -bottom-1 transition-all duration-300;
            }
            .nav-link:hover::after {
                @apply w-full;
            }
            .progress-ring-circle {
                transition: stroke-dashoffset 0.35s;
                transform: rotate(-90deg);
                transform-origin: 50% 50%;
            }
        }
    </style>
</head>
<body class="font-inter bg-gray-50 text-gray-800 min-h-screen flex flex-col">
    <!-- 导航栏 -->
    <header id="navbar" class="fixed w-full bg-white/90 backdrop-blur-sm shadow-sm z-50 transition-all duration-300">
        <div class="container mx-auto px-4 py-3 flex items-center justify-between">
            <div class="flex items-center space-x-2">
                <i class="fa fa-leaf text-2xl text-secondary"></i>
                <h1 class="text-xl font-bold text-dark">生物学知识库</h1>
            </div>
            
            <!-- 桌面导航 -->
            <nav class="hidden md:flex items-center space-x-1">
                <a href="#home" class="nav-link">首页</a>
                <a href="#middle-school" class="nav-link">初中知识</a>
                <a href="#high-school" class="nav-link">高中知识</a>
                <a href="#progress" class="nav-link">学习进度</a>
                <a href="#quiz" class="nav-link">自测练习</a>
            </nav>
            
            <div class="flex items-center space-x-4">
                <div class="relative hidden md:block">
                    <input type="text" id="search-input" placeholder="搜索知识点..." 
                           class="pl-10 pr-4 py-2 rounded-full border border-gray-300 focus:outline-none focus:ring-2 focus:ring-primary/50 focus:border-primary transition-all w-48 lg:w-64">
                    <i class="fa fa-search absolute left-3 top-1/2 -translate-y-1/2 text-gray-400"></i>
                </div>
                
                <!-- 移动端菜单按钮 -->
                <button id="mobile-menu-btn" class="md:hidden text-gray-700 hover:text-primary">
                    <i class="fa fa-bars text-xl"></i>
                </button>
            </div>
        </div>
        
        <!-- 移动端导航菜单 -->
        <div id="mobile-menu" class="md:hidden hidden bg-white border-t">
            <div class="container mx-auto px-4 py-3">
                <div class="relative mb-4">
                    <input type="text" id="mobile-search-input" placeholder="搜索知识点..." 
                           class="pl-10 pr-4 py-2 rounded-full border border-gray-300 focus:outline-none focus:ring-2 focus:ring-primary/50 focus:border-primary transition-all w-full">
                    <i class="fa fa-search absolute left-3 top-1/2 -translate-y-1/2 text-gray-400"></i>
                </div>
                <nav class="flex flex-col space-y-3 pb-2">
                    <a href="#home" class="px-3 py-2 text-gray-700 hover:text-primary transition-colors">首页</a>
                    <a href="#middle-school" class="px-3 py-2 text-gray-700 hover:text-primary transition-colors">初中知识</a>
                    <a href="#high-school" class="px-3 py-2 text-gray-700 hover:text-primary transition-colors">高中知识</a>
                    <a href="#progress" class="px-3 py-2 text-gray-700 hover:text-primary transition-colors">学习进度</a>
                    <a href="#quiz" class="px-3 py-2 text-gray-700 hover:text-primary transition-colors">自测练习</a>
                </nav>
            </div>
        </div>
    </header>

    <!-- 主内容区 -->
    <main class="flex-grow pt-16">
        <!-- 英雄区域 -->
        <section id="home" class="relative bg-gradient-to-br from-blue-50 to-green-50 py-16 md:py-24 overflow-hidden">
            <div class="absolute inset-0 overflow-hidden opacity-10">
                <i class="fa fa-dna absolute -top-20 -left-20 text-[200px] text-primary"></i>
                <i class="fa fa-leaf absolute top-1/3 right-10 text-[150px] text-secondary"></i>
                <i class="fa fa-bug absolute bottom-10 left-1/4 text-[120px] text-accent"></i>
            </div>
            
            <div class="container mx-auto px-4 relative z-10">
                <div class="max-w-3xl mx-auto text-center">
                    <h1 class="text-[clamp(2rem,5vw,3.5rem)] font-bold text-dark leading-tight mb-6 text-shadow">
                        探索生命的奥秘<br>掌握生物学知识
                    </h1>
                    <p class="text-[clamp(1rem,2vw,1.25rem)] text-gray-600 mb-8">
                        从基础概念到深入理解，我们提供初高中完整生物学知识体系，助你轻松学习，掌握要点。
                    </p>
                    <div class="flex flex-col sm:flex-row justify-center gap-4">
                        <a href="#middle-school" class="px-6 py-3 bg-primary hover:bg-primary/90 text-white rounded-full shadow-md hover:shadow-lg transition-all font-medium">
                            开始学习 <i class="fa fa-arrow-right ml-2"></i>
                        </a>
                        <a href="#quiz" class="px-6 py-3 bg-white hover:bg-gray-50 text-primary border border-primary rounded-full shadow-sm hover:shadow transition-all font-medium">
                            自测练习 <i class="fa fa-check-circle ml-2"></i>
                        </a>
                    </div>
                </div>
            </div>
            
            <div class="absolute bottom-0 left-0 right-0 h-16 bg-gradient-to-t from-gray-50 to-transparent"></div>
        </section>
        
        <!-- 知识点统计 -->
        <section class="py-12 bg-white">
            <div class="container mx-auto px-4">
                <div class="grid grid-cols-2 md:grid-cols-4 gap-6 text-center">
                    <div class="p-6 rounded-xl bg-blue-50">
                        <div class="text-4xl font-bold text-primary mb-2" id="middle-school-count">0</div>
                        <div class="text-gray-600">初中知识点</div>
                    </div>
                    <div class="p-6 rounded-xl bg-green-50">
                        <div class="text-4xl font-bold text-secondary mb-2" id="high-school-count">0</div>
                        <div class="text-gray-600">高中知识点</div>
                    </div>
                    <div class="p-6 rounded-xl bg-yellow-50">
                        <div class="text-4xl font-bold text-accent mb-2">8+</div>
                        <div class="text-gray-600">知识分类</div>
                    </div>
                    <div class="p-6 rounded-xl bg-purple-50">
                        <div class="text-4xl font-bold text-purple-500 mb-2">100%</div>
                        <div class="text-gray-600">免费学习</div>
                    </div>
                </div>
            </div>
        </section>
        
        <!-- 初中知识点 -->
        <section id="middle-school" class="py-16 bg-gray-50">
            <div class="container mx-auto px-4">
                <div class="text-center mb-12">
                    <h2 class="text-[clamp(1.5rem,3vw,2.5rem)] font-bold text-dark mb-4">初中生物学知识</h2>
                    <p class="text-gray-600 max-w-2xl mx-auto">掌握基础生物学概念，理解生命的基本特征和规律，为深入学习打下坚实基础。</p>
                </div>
                
                <div class="grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-8" id="middle-school-topics">
                    <!-- 加载状态 -->
                    <div class="col-span-full text-center py-12">
                        <div class="inline-block animate-spin rounded-full h-12 w-12 border-t-2 border-b-2 border-primary mb-4"></div>
                        <p class="text-gray-500">正在加载知识点...</p>
                    </div>
                </div>
            </div>
        </section>
        
        <!-- 高中知识点 -->
        <section id="high-school" class="py-16 bg-white">
            <div class="container mx-auto px-4">
                <div class="text-center mb-12">
                    <h2 class="text-[clamp(1.5rem,3vw,2.5rem)] font-bold text-dark mb-4">高中生物学知识</h2>
                    <p class="text-gray-600 max-w-2xl mx-auto">深入探索生命的分子机制、遗传规律和生态系统，构建完整的生物学知识体系。</p>
                </div>
                
                <div class="grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-8" id="high-school-topics">
                    <!-- 加载状态 -->
                    <div class="col-span-full text-center py-12">
                        <div class="inline-block animate-spin rounded-full h-12 w-12 border-t-2 border-b-2 border-secondary mb-4"></div>
                        <p class="text-gray-500">正在加载知识点...</p>
                    </div>
                </div>
            </div>
        </section>
        
        <!-- 学习进度 -->
        <section id="progress" class="py-16 bg-gradient-to-br from-indigo-50 to-purple-50">
            <div class="container mx-auto px-4">
                <div class="text-center mb-12">
                    <h2 class="text-[clamp(1.5rem,3vw,2.5rem)] font-bold text-dark mb-4">学习进度追踪</h2>
                    <p class="text-gray-600 max-w-2xl mx-auto">记录你的学习历程，掌握学习节奏，高效备考。</p>
                </div>
                
                <div class="grid grid-cols-1 lg:grid-cols-3 gap-8">
                    <div class="lg:col-span-1">
                        <div class="bg-white rounded-2xl shadow-sm p-6 h-full">
                            <h3 class="text-xl font-semibold mb-6">总体进度</h3>
                            
                            <div class="flex flex-col items-center mb-8">
                                <div class="relative w-40 h-40 mb-4">
                                    <svg class="w-full h-full" viewBox="0 0 100 100">
                                        <circle cx="50" cy="50" r="45" fill="none" stroke="#e5e7eb" stroke-width="10"/>
                                        <circle id="progress-circle" class="progress-ring-circle" cx="50" cy="50" r="45" fill="none" stroke="#2563eb" stroke-width="10" stroke-dasharray="283" stroke-dashoffset="141.5"/>
                                    </svg>
                                    <div class="absolute inset-0 flex items-center justify-center text-3xl font-bold text-primary" id="overall-progress">50%</div>
                                </div>
                                <p class="text-gray-600">已学习 <span id="learned-count">80</span> / <span id="total-count">160</span> 个知识点</p>
                            </div>
                            
                            <div class="space-y-4">
                                <div>
                                    <div class="flex justify-between mb-1">
                                        <span class="text-sm font-medium">初中生物学</span>
                                        <span class="text-sm text-gray-500">65%</span>
                                    </div>
                                    <div class="w-full bg-gray-200 rounded-full h-2.5">
                                        <div class="bg-primary h-2.5 rounded-full" style="width: 65%"></div>
                                    </div>
                                </div>
                                
                                <div>
                                    <div class="flex justify-between mb-1">
                                        <span class="text-sm font-medium">高中生物学</span>
                                        <span class="text-sm text-gray-500">35%</span>
                                    </div>
                                    <div class="w-full bg-gray-200 rounded-full h-2.5">
                                        <div class="bg-secondary h-2.5 rounded-full" style="width: 35%"></div>
                                    </div>
                                </div>
                            </div>
                        </div>
                    </div>
                    
                    <div class="lg:col-span-2">
                        <div class="bg-white rounded-2xl shadow-sm p-6 h-full">
                            <h3 class="text-xl font-semibold mb-6">学习趋势</h3>
                            <div class="h-64">
                                <canvas id="learning-chart"></canvas>
                            </div>
                        </div>
                    </div>
                </div>
            </div>
        </section>
        
        <!-- 自测练习 -->
        <section id="quiz" class="py-16 bg-white">
            <div class="container mx-auto px-4">
                <div class="text-center mb-12">
                    <h2 class="text-[clamp(1.5rem,3vw,2.5rem)] font-bold text-dark mb-4">自测练习</h2>
                    <p class="text-gray-600 max-w-2xl mx-auto">通过练习题巩固所学知识，检验学习效果，查漏补缺。</p>
                </div>
                
                <div class="max-w-3xl mx-auto bg-gray-50 rounded-2xl shadow-sm p-6 md:p-8">
                    <div class="mb-6 flex justify-between items-center">
                        <span class="px-3 py-1 bg-blue-100 text-primary rounded-full text-sm font-medium">初中 · 细胞结构</span>
                        <span class="text-gray-500">题目 1/5</span>
                    </div>
                    
                    <h3 class="text-xl font-semibold mb-6">下列哪项不是动物细胞的结构？</h3>
                    
                    <div class="space-y-3 mb-8">
                        <div class="p-4 bg-white border border-gray-200 rounded-xl hover:border-primary hover:bg-blue-50 cursor-pointer transition-all">
                            <label class="flex items-center cursor-pointer">
                                <input type="radio" name="quiz" class="w-5 h-5 text-primary">
                                <span class="ml-3">细胞膜</span>
                            </label>
                        </div>
                        
                        <div class="p-4 bg-white border border-gray-200 rounded-xl hover:border-primary hover:bg-blue-50 cursor-pointer transition-all">
                            <label class="flex items-center cursor-pointer">
                                <input type="radio" name="quiz" class="w-5 h-5 text-primary">
                                <span class="ml-3">细胞壁</span>
                            </label>
                        </div>
                        
                        <div class="p-4 bg-white border border-gray-200 rounded-xl hover:border-primary hover:bg-blue-50 cursor-pointer transition-all">
                            <label class="flex items-center cursor-pointer">
                                <input type="radio" name="quiz" class="w-5 h-5 text-primary">
                                <span class="ml-3">细胞核</span>
                            </label>
                        </div>
                        
                        <div class="p-4 bg-white border border-gray-200 rounded-xl hover:border-primary hover:bg-blue-50 cursor-pointer transition-all">
                            <label class="flex items-center cursor-pointer">
                                <input type="radio" name="quiz" class="w-5 h-5 text-primary">
                                <span class="ml-3">线粒体</span>
                            </label>
                        </div>
                    </div>
                    
                    <div class="flex justify-between">
                        <button class="px-5 py-2.5 border border-gray-300 rounded-lg text-gray-700 hover:bg-gray-50 transition-colors">
                            <i class="fa fa-arrow-left mr-2"></i> 上一题
                        </button>
                        <button class="px-5 py-2.5 bg-primary text-white rounded-lg hover:bg-primary/90 transition-colors">
                            下一题 <i class="fa fa-arrow-right ml-2"></i>
                        </button>
                    </div>
                </div>
                
                <div class="mt-12 text-center">
                    <a href="#" class="inline-flex items-center text-primary hover:text-primary/80 font-medium">
                        查看更多练习题 <i class="fa fa-long-arrow-right ml-2"></i>
                    </a>
                </div>
            </div>
        </section>
        
        <!-- 搜索结果模态框 -->
        <div id="search-modal" class="fixed inset-0 bg-black/50 backdrop-blur-sm z-50 hidden flex items-center justify-center p-4">
            <div class="bg-white rounded-2xl max-w-2xl w-full max-h-[80vh] overflow-hidden flex flex-col">
                <div class="p-6 border-b">
                    <div class="flex justify-between items-center">
                        <h3 class="text-xl font-semibold">搜索结果</h3>
                        <button id="close-search" class="text-gray-500 hover:text-gray-700">
                            <i class="fa fa-times text-xl"></i>
                        </button>
                    </div>
                    <div class="mt-4 relative">
                        <input type="text" id="modal-search-input" placeholder="搜索知识点..." 
                               class="pl-10 pr-4 py-2 rounded-lg border border-gray-300 focus:outline-none focus:ring-2 focus:ring-primary/50 focus:border-primary transition-all w-full">
                        <i class="fa fa-search absolute left-3 top-1/2 -translate-y-1/2 text-gray-400"></i>
                    </div>
                </div>
                
                <div class="p-6 overflow-y-auto flex-grow" id="search-results">
                    <!-- 搜索结果将通过JS动态生成 -->
                    <div class="text-center text-gray-500 py-12">
                        <i class="fa fa-search text-4xl mb-4 opacity-30"></i>
                        <p>请输入关键词搜索知识点</p>
                    </div>
                </div>
                
                <div class="p-4 border-t bg-gray-50 text-center">
                    <button id="cancel-search" class="px-5 py-2 text-gray-600 hover:text-gray-800">取消</button>
                </div>
            </div>
        </div>
        
        <!-- 知识点详情模态框 -->
        <div id="term-modal" class="fixed inset-0 bg-black/50 backdrop-blur-sm z-50 hidden flex items-center justify-center p-4">
            <div class="bg-white rounded-2xl max-w-2xl w-full max-h-[80vh] overflow-hidden flex flex-col">
                <div class="p-6 border-b flex justify-between items-center">
                    <h3 class="text-xl font-semibold" id="term-title">知识点名称</h3>
                    <div class="flex space-x-2">
                        <button id="mark-learned" class="text-gray-500 hover:text-secondary transition-colors" title="标记为已学习">
                            <i class="fa fa-check-circle text-xl"></i>
                        </button>
                        <button id="close-term" class="text-gray-500 hover:text-gray-700">
                            <i class="fa fa-times text-xl"></i>
                        </button>
                    </div>
                </div>
                
                <div class="p-6 overflow-y-auto flex-grow">
                    <div class="mb-6">
                        <h4 class="text-sm text-gray-500 uppercase tracking-wider mb-2">定义</h4>
                        <p class="text-lg text-gray-800" id="term-definition">知识点定义内容...</p>
                    </div>
                    
                    <div class="bg-gray-50 p-4 rounded-xl">
                        <h4 class="text-sm font-medium text-gray-700 mb-2">相关知识点</h4>
                        <div class="flex flex-wrap gap-2" id="related-terms">
                            <!-- 相关知识点将通过JS动态生成 -->
                        </div>
                    </div>
                </div>
                
                <div class="p-4 border-t bg-gray-50 flex justify-between">
                    <button id="prev-term" class="px-5 py-2 text-gray-600 hover:text-gray-800">
                        <i class="fa fa-arrow-left mr-1"></i> 上一个
                    </button>
                    <button id="next-term" class="px-5 py-2 text-gray-600 hover:text-gray-800">
                        下一个 <i class="fa fa-arrow-right ml-1"></i>
                    </button>
                </div>
            </div>
        </div>
    </main>

    <!-- 页脚 -->
    <footer class="bg-dark text-gray-300 py-12">
        <div class="container mx-auto px-4">
            <div class="grid grid-cols-1 md:grid-cols-4 gap-8 mb-8">
                <div>
                    <div class="flex items-center space-x-2 mb-4">
                        <i class="fa fa-leaf text-2xl text-secondary"></i>
                        <h3 class="text-xl font-bold text-white">生物学知识库</h3>
                    </div>
                    <p class="text-gray-400 mb-4">提供初高中完整生物学知识体系，助力学生轻松掌握生物学要点。</p>
                    <div class="flex space-x-4">
                        <a href="#" class="text-gray-400 hover:text-white transition-colors">
                            <i class="fa fa-weibo"></i>
                        </a>
                        <a href="#" class="text-gray-400 hover:text-white transition-colors">
                            <i class="fa fa-wechat"></i>
                        </a>
                        <a href="#" class="text-gray-400 hover:text-white transition-colors">
                            <i class="fa fa-qq"></i>
                        </a>
                    </div>
                </div>
                
                <div>
                    <h4 class="text-white font-semibold mb-4">快速链接</h4>
                    <ul class="space-y-2">
                        <li><a href="#home" class="text-gray-400 hover:text-white transition-colors">首页</a></li>
                        <li><a href="#middle-school" class="text-gray-400 hover:text-white transition-colors">初中知识</a></li>
                        <li><a href="#high-school" class="text-gray-400 hover:text-white transition-colors">高中知识</a></li>
                        <li><a href="#progress" class="text-gray-400 hover:text-white transition-colors">学习进度</a></li>
                        <li><a href="#quiz" class="text-gray-400 hover:text-white transition-colors">自测练习</a></li>
                    </ul>
                </div>
                
                <div>
                    <h4 class="text-white font-semibold mb-4">学习资源</h4>
                    <ul class="space-y-2">
                        <li><a href="#" class="text-gray-400 hover:text-white transition-colors">知识点总结</a></li>
                        <li><a href="#" class="text-gray-400 hover:text-white transition-colors">习题集</a></li>
                        <li><a href="#" class="text-gray-400 hover:text-white transition-colors">实验指导</a></li>
                        <li><a href="#" class="text-gray-400 hover:text-white transition-colors">学习方法</a></li>
                        <li><a href="#" class="text-gray-400 hover:text-white transition-colors">备考指南</a></li>
                    </ul>
                </div>
                
                <div>
                    <h4 class="text-white font-semibold mb-4">联系我们</h4>
                    <ul class="space-y-2">
                        <li class="flex items-start">
                            <i class="fa fa-envelope-o mt-1 mr-3 text-gray-400"></i>
                            <span class="text-gray-400">contact@biolearn.com</span>
                        </li>
                        <li class="flex items-start">
                            <i class="fa fa-phone mt-1 mr-3 text-gray-400"></i>
                            <span class="text-gray-400">400-123-4567</span>
                        </li>
                    </ul>
                </div>
            </div>
            
            <div class="border-t border-gray-700 pt-8 text-center text-gray-500 text-sm">
                <p>© 2023 生物学知识库 版权所有 | 专注于初高中生物学教育</p>
            </div>
        </div>
    </footer>

    <script>
        // 全局变量存储从JSON加载的数据
        let biologyData = null;

        // 页面加载完成后执行
        document.addEventListener('DOMContentLoaded', function() {
            // 从外部JSON文件加载数据
            loadBiologyData();
            
            // 初始化学习进度图表
            initLearningChart();
            
            // 事件监听
            setupEventListeners();
        });
        
        // 从外部JSON文件加载数据
        async function loadBiologyData() {
            try {
                // 从外部JSON文件获取数据
                const response = await fetch('biology.json');
                
                if (!response.ok) {
                    throw new Error('网络响应不正常');
                }
                
                // 解析JSON数据
                biologyData = await response.json();
                
                // 数据加载成功后初始化页面
                initPage();
                
            } catch (error) {
                console.error('加载生物学数据失败:', error);
                
                // 显示错误信息
                const middleSchoolTopics = document.getElementById('middle-school-topics');
                const highSchoolTopics = document.getElementById('high-school-topics');
                
                middleSchoolTopics.innerHTML = `
                    <div class="col-span-full text-center py-12">
                        <i class="fa fa-exclamation-triangle text-4xl mb-4 text-accent"></i>
                        <p class="text-gray-500">数据加载失败，请稍后重试</p>
                    </div>
                `;
                
                highSchoolTopics.innerHTML = middleSchoolTopics.innerHTML;
            }
        }
        
        // 初始化页面
        function initPage() {
            if (!biologyData) return;
            
            // 生成初中知识点分类
            const middleSchoolTopics = document.getElementById('middle-school-topics');
            const middleSchoolData = biologyData.biology_knowledge.middle_school;
            
            // 清空加载状态
            middleSchoolTopics.innerHTML = '';
            
            for (const [category, terms] of Object.entries(middleSchoolData)) {
                const topicCard = createTopicCard(category, terms, 'middle');
                middleSchoolTopics.appendChild(topicCard);
            }
            
            // 生成高中知识点分类
            const highSchoolTopics = document.getElementById('high-school-topics');
            const highSchoolData = biologyData.biology_knowledge.high_school;
            
            // 清空加载状态
            highSchoolTopics.innerHTML = '';
            
            for (const [category, terms] of Object.entries(highSchoolData)) {
                const topicCard = createTopicCard(category, terms, 'high');
                highSchoolTopics.appendChild(topicCard);
            }
            
            // 计算并显示知识点数量
            calculateTermCounts();
        }
        
        // 创建知识点分类卡片
        function createTopicCard(category, terms, level) {
            const card = document.createElement('div');
            card.className = 'bg-white rounded-2xl shadow-sm overflow-hidden card-hover';
            
            // 根据类别选择不同的图标
            let icon = 'fa-book';
            if (category.includes('细胞')) icon = 'fa-cell';
            else if (category.includes('植物')) icon = 'fa-leaf';
            else if (category.includes('动物')) icon = 'fa-dog';
            else if (category.includes('生态')) icon = 'fa-globe';
            else if (category.includes('遗传')) icon = 'fa-dna';
            
            card.innerHTML = `
                <div class="p-6">
                    <div class="flex items-center mb-4">
                        <div class="w-10 h-10 rounded-full ${level === 'middle' ? 'bg-blue-100 text-primary' : 'bg-green-100 text-secondary'} flex items-center justify-center mr-3">
                            <i class="fa ${icon}"></i>
                        </div>
                        <h3 class="text-lg font-semibold">${category}</h3>
                    </div>
                    <p class="text-gray-500 text-sm mb-4">共 ${terms.length} 个知识点</p>
                    <div class="space-y-2 mb-4 max-h-40 overflow-y-auto pr-2">
                        ${terms.slice(0, 5).map(term => `
                            <div class="term-item text-sm p-2 hover:bg-gray-50 rounded-lg cursor-pointer transition-colors" 
                                 data-term="${term.term}" 
                                 data-def="${term.def}"
                                 data-category="${category}"
                                 data-level="${level}">
                                <i class="fa fa-angle-right text-gray-400 mr-2"></i>${term.term}
                            </div>
                        `).join('')}
                        ${terms.length > 5 ? `<div class="text-center text-xs text-gray-400 mt-2">... 还有 ${terms.length - 5} 个知识点</div>` : ''}
                    </div>
                    <button class="view-all-terms w-full py-2 text-center text-sm font-medium rounded-lg ${level === 'middle' ? 'text-primary hover:bg-blue-50' : 'text-secondary hover:bg-green-50'} transition-colors"
                            data-category="${category}"
                            data-level="${level}">
                        查看全部 <i class="fa fa-arrow-right ml-1"></i>
                    </button>
                </div>
            `;
            
            return card;
        }
        
        // 计算并显示知识点数量
        function calculateTermCounts() {
            if (!biologyData) return;
            
            let middleCount = 0;
            let highCount = 0;
            
            // 计算初中知识点总数
            for (const [_, terms] of Object.entries(biologyData.biology_knowledge.middle_school)) {
                middleCount += terms.length;
            }
            
            // 计算高中知识点总数
            for (const [_, terms] of Object.entries(biologyData.biology_knowledge.high_school)) {
                highCount += terms.length;
            }
            
            // 动画显示计数
            animateCount('middle-school-count', 0, middleCount, 1500);
            animateCount('high-school-count', 0, highCount, 1500);
            
            // 更新进度统计
            document.getElementById('total-count').textContent = middleCount + highCount;
        }
        
        // 数字增长动画
        function animateCount(elementId, start, end, duration) {
            const element = document.getElementById(elementId);
            const range = end - start;
            const minTimer = 50;
            let stepTime = Math.abs(Math.floor(duration / range));
            
            stepTime = Math.max(stepTime, minTimer);
            
            let startTime = new Date().getTime();
            let endTime = startTime + duration;
            let timer;
            
            function run() {
                let now = new Date().getTime();
                let remaining = Math.max((endTime - now) / duration, 0);
                let value = Math.round(end - (remaining * range));
                element.textContent = value;
                
                if (value == end) {
                    clearInterval(timer);
                }
            }
            
            timer = setInterval(run, stepTime);
            run();
        }
        
        // 初始化学习进度图表
        function initLearningChart() {
            const ctx = document.getElementById('learning-chart').getContext('2d');
            
            const chart = new Chart(ctx, {
                type: 'line',
                data: {
                    labels: ['周一', '周二', '周三', '周四', '周五', '周六', '周日'],
                    datasets: [
                        {
                            label: '初中知识点',
                            data: [5, 8, 3, 10, 7, 12, 9],
                            borderColor: '#2563eb',
                            backgroundColor: 'rgba(37, 99, 235, 0.1)',
                            tension: 0.4,
                            fill: true
                        },
                        {
                            label: '高中知识点',
                            data: [2, 5, 1, 3, 6, 8, 4],
                            borderColor: '#10b981',
                            backgroundColor: 'rgba(16, 185, 129, 0.1)',
                            tension: 0.4,
                            fill: true
                        }
                    ]
                },
                options: {
                    responsive: true,
                    maintainAspectRatio: false,
                    plugins: {
                        legend: {
                            position: 'top',
                        }
                    },
                    scales: {
                        y: {
                            beginAtZero: true,
                            title: {
                                display: true,
                                text: '学习数量'
                            }
                        }
                    }
                }
            });
        }
        
        // 设置事件监听器
        function setupEventListeners() {
            // 移动端菜单切换
            const mobileMenuBtn = document.getElementById('mobile-menu-btn');
            const mobileMenu = document.getElementById('mobile-menu');
            
            mobileMenuBtn.addEventListener('click', function() {
                mobileMenu.classList.toggle('hidden');
            });
            
            // 导航栏滚动效果
            const navbar = document.getElementById('navbar');
            window.addEventListener('scroll', function() {
                if (window.scrollY > 50) {
                    navbar.classList.add('py-2', 'shadow');
                    navbar.classList.remove('py-3');
                } else {
                    navbar.classList.add('py-3');
                    navbar.classList.remove('py-2', 'shadow');
                }
            });
            
            // 平滑滚动
            document.querySelectorAll('a[href^="#"]').forEach(anchor => {
                anchor.addEventListener('click', function (e) {
                    e.preventDefault();
                    
                    // 关闭移动菜单
                    mobileMenu.classList.add('hidden');
                    
                    document.querySelector(this.getAttribute('href')).scrollIntoView({
                        behavior: 'smooth'
                    });
                });
            });
            
            // 知识点点击事件 - 委托给父元素
            document.body.addEventListener('click', function(e) {
                // 单个知识点点击
                if (e.target.closest('.term-item')) {
                    const termItem = e.target.closest('.term-item');
                    const term = termItem.dataset.term;
                    const def = termItem.dataset.def;
                    const category = termItem.dataset.category;
                    const level = termItem.dataset.level;
                    
                    showTermDetail(term, def, category, level);
                }
                
                // 查看全部知识点点击
                if (e.target.closest('.view-all-terms')) {
                    const btn = e.target.closest('.view-all-terms');
                    const category = btn.dataset.category;
                    const level = btn.dataset.level;
                    
                    showAllTermsInCategory(category, level);
                }
            });
            
            // 搜索功能
            const searchInputs = [
                document.getElementById('search-input'),
                document.getElementById('mobile-search-input'),
                document.getElementById('modal-search-input')
            ];
            
            searchInputs.forEach(input => {
                if (input) {
                    input.addEventListener('keyup', function(e) {
                        const keyword = e.target.value.trim().toLowerCase();
                        
                        if (keyword.length >= 1) {
                            searchTerms(keyword);
                            document.getElementById('search-modal').classList.remove('hidden');
                        } else if (keyword.length === 0) {
                            document.getElementById('search-results').innerHTML = `
                                <div class="text-center text-gray-500 py-12">
                                    <i class="fa fa-search text-4xl mb-4 opacity-30"></i>
                                    <p>请输入关键词搜索知识点</p>
                                </div>
                            `;
                        }
                    });
                    
                    input.addEventListener('focus', function() {
                        if (this.value.trim().length >= 1) {
                            document.getElementById('search-modal').classList.remove('hidden');
                        }
                    });
                }
            });
            
            // 关闭搜索模态框
            document.getElementById('close-search').addEventListener('click', function() {
                document.getElementById('search-modal').classList.add('hidden');
            });
            
            document.getElementById('cancel-search').addEventListener('click', function() {
                document.getElementById('search-modal').classList.add('hidden');
            });
            
            // 关闭知识点详情模态框
            document.getElementById('close-term').addEventListener('click', function() {
                document.getElementById('term-modal').classList.add('hidden');
            });
            
            // 标记为已学习
            document.getElementById('mark-learned').addEventListener('click', function() {
                alert('已标记为已学习！');
            });
        }
        
        // 显示知识点详情
        function showTermDetail(term, definition, category, level) {
            if (!biologyData) return;
            
            document.getElementById('term-title').textContent = term;
            document.getElementById('term-definition').textContent = definition;
            
            // 清空并生成相关知识点
            const relatedContainer = document.getElementById('related-terms');
            relatedContainer.innerHTML = '';
            
            // 简单获取相关知识点
            const levelData = biologyData.biology_knowledge[level === 'middle' ? 'middle_school' : 'high_school'];
            let relatedTerms = [];
            
            // 在同一类别中查找相关术语
            if (levelData[category]) {
                levelData[category].forEach(t => {
                    if (t.term !== term && relatedTerms.length < 5) {
                        relatedTerms.push(t);
                    }
                });
            }
            
            // 生成相关知识点标签
            relatedTerms.forEach(t => {
                const tag = document.createElement('a');
                tag.className = 'px-3 py-1 bg-gray-100 hover:bg-gray-200 rounded-full text-sm text-gray-700 transition-colors';
                tag.textContent = t.term;
                tag.addEventListener('click', function(e) {
                    e.preventDefault();
                    showTermDetail(t.term, t.def, category, level);
                });
                relatedContainer.appendChild(tag);
            });
            
            // 显示模态框
            document.getElementById('term-modal').classList.remove('hidden');
        }
        
        // 显示某一分类下的所有知识点
        function showAllTermsInCategory(category, level) {
            if (!biologyData) return;
            
            const levelData = biologyData.biology_knowledge[level === 'middle' ? 'middle_school' : 'high_school'];
            const terms = levelData[category] || [];
            
            // 更新搜索结果区域
            const resultsContainer = document.getElementById('search-results');
            resultsContainer.innerHTML = `
                <div class="mb-6">
                    <h3 class="text-lg font-semibold mb-2">${category}</h3>
                    <p class="text-gray-500 text-sm">共 ${terms.length} 个知识点</p>
                </div>
                <div class="space-y-2">
                    ${terms.map(term => `
                        <div class="term-item p-3 hover:bg-gray-50 rounded-lg cursor-pointer transition-colors" 
                             data-term="${term.term}" 
                             data-def="${term.def}"
                             data-category="${category}"
                             data-level="${level}">
                            <div class="font-medium">${term.term}</div>
                            <div class="text-sm text-gray-500 mt-1 line-clamp-2">${term.def}</div>
                        </div>
                    `).join('')}
                </div>
            `;
            
            // 显示搜索模态框
            document.getElementById('search-modal').classList.remove('hidden');
        }
        
        // 搜索知识点
        function searchTerms(keyword) {
            if (!biologyData) return;
            
            const results = [];
            
            // 搜索初中知识点
            for (const [category, terms] of Object.entries(biologyData.biology_knowledge.middle_school)) {
                terms.forEach(term => {
                    if (term.term.toLowerCase().includes(keyword) || term.def.toLowerCase().includes(keyword)) {
                        results.push({
                            ...term,
                            category,
                            level: 'middle'
                        });
                    }
                });
            }
            
            // 搜索高中知识点
            for (const [category, terms] of Object.entries(biologyData.biology_knowledge.high_school)) {
                terms.forEach(term => {
                    if (term.term.toLowerCase().includes(keyword) || term.def.toLowerCase().includes(keyword)) {
                        results.push({
                            ...term,
                            category,
                            level: 'high'
                        });
                    }
                });
            }
            
            // 显示搜索结果
            const resultsContainer = document.getElementById('search-results');
            
            if (results.length === 0) {
                resultsContainer.innerHTML = `
                    <div class="text-center text-gray-500 py-12">
                        <i class="fa fa-search text-4xl mb-4 opacity-30"></i>
                        <p>未找到与"${keyword}"相关的知识点</p>
                    </div>
                `;
                return;
            }
            
            resultsContainer.innerHTML = `
                <div class="mb-6">
                    <h3 class="text-lg font-semibold mb-2">找到 ${results.length} 个相关结果</h3>
                    <p class="text-gray-500 text-sm">关键词: "${keyword}"</p>
                </div>
                <div class="space-y-4">
                    ${results.map(item => `
                        <div class="term-item p-4 bg-white border border-gray-100 rounded-lg cursor-pointer transition-colors hover:border-primary/30" 
                             data-term="${item.term}" 
                             data-def="${item.def}"
                             data-category="${item.category}"
                             data-level="${item.level}">
                            <div class="flex justify-between items-start">
                                <div>
                                    <div class="font-medium">${item.term}</div>
                                    <div class="text-xs text-gray-500 mt-1">${item.category} ${item.level === 'middle' ? '(初中)' : '(高中)'}</div>
                                </div>
                                <span class="px-2 py-1 text-xs rounded-full ${item.level === 'middle' ? 'bg-blue-100 text-primary' : 'bg-green-100 text-secondary'}">
                                    ${item.level === 'middle' ? '初中' : '高中'}
                                </span>
                            </div>
                            <div class="text-sm text-gray-600 mt-2 line-clamp-2">${item.def}</div>
                        </div>
                    `).join('')}
                </div>
            `;
        }
    </script>
</body>
</html>
